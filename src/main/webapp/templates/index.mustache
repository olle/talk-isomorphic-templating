<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Mustache Templating</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href='http://fonts.googleapis.com/css?family=Oregano' rel='stylesheet' type='text/css'>
  <link href="css/style.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <header>
    <div class="container">
      <h1>{{greeting}}</h1>
    </div>
  </header>

  <section class="container">
    <article>
      <h2>People:</h2>
      <ul id="people">
        {{#items}}
          <li>{{> person}}</li>
        {{/items}}
        {{^items}}
          <li>No people here!</li>
        {{/items}}
      </ul>
    </article>

    <article>
      <h3>Add new person:</h3>
      <form id="add-person">
        <input type="text" name="name" placeholder="Name" />
        <input type="text" name="age" placeholder="Age" size="5" />
        <button type="submit">Save person</button>
      </form>
    </article>
  </section>

  <script type="text/javascript" src="assets/mustache/mustache.js"></script>
  <script type="text/javascript" src="assets/jquery/dist/jquery.js"></script>
  <script type="text/javascript">
    (function($, Mustache) {

      var template = $.ajax({
        type: "GET",
        url: 'templates/person.mustache',
        async: false
      }).responseText;

      $('#add-person').on('submit', function(ev) {
        ev.preventDefault();
        var person = {
          name: ev.target['name'].value,
          age: ev.target['age'].value,
        };

        var el = [
          '<li>',
          Mustache.render(template, person),
          '</li>'
        ].join('');

        $('#people').append(el);

        ev.target['name'].value = '';
        ev.target['age'].value = '';
      });
    })(jQuery, Mustache);
  </script>

</body>

</html>
